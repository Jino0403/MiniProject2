<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>제품 구매</title>
    <link rel="stylesheet" href="/Frontend/CSS/purchase-detail.css">
    <script type="module" src="/Frontend/Javascript/purchase.js" defer></script>
  </head>
  <body>
    <h1>제품 구매</h1>
    <p class="step"><span class="step-order">주문결제</span>> 결제완료</p>
<hr class="first-hr">
<form id="purchaseForm" action="/Frontend/HTML/purchase/purchase-detail.html" method="post"></form>
<table>
    <caption>
      구매자 정보
    </caption>
    <thead>
      <tr>
        <td class="table-left">성함</td>
        <td class="table-right">윤형우</td>
      </tr>
      <tr>
        <td class="table-left">주소</td>
        <td class="table-right">대한민국 서울시</td>
      </tr>
      <tr>
        <td class="table-left">전화번호</td>
        <td class="table-right">010-3720-8465</td>
      </tr>
    </thead>
    </table>
    <table>
        <caption>
          상품 주문 정보
        </caption>
        <thead>
          <tr>
            <td class="table-left">상품명</td>
            <td class="table-right">기네스</td>
          </tr>
          <tr>
            <td class="table-left">수량</td>
            <td class="table-right">3</td>
          </tr>
          <tr>
            <td class="table-left">가격</td>
            <td class="table-right">3,300원</td>
          </tr>
        </thead>
  </table>

  <table>
    <caption>
      결제 내용
    </caption>
    <thead>
      <tr>
        <td class="table-left">총 가격</td>
        <td class="table-right">9,900원</td>
      </tr>
      <tr>
        <td class="table-left">배송 메모</td>
        <td class="table-right"><input type="text" id="delivery_memo" name="delivery_memo" required></td>
      </tr>
      <tr>
        <td class="table-left">결제 방법</td>
        <td class="table-right">
            <select id="payment_method" name="payment_method" required onchange="updatePaymentFields()">
                <option value="credit_card">신용 카드</option>
                <option value="bank_transfer">무통장 입금</option>
              </select>
          <button class="select-button" type="button" onclick="showSelectedPaymentFields()">
            선택완료
          </button>
        </td>
      </tr>
      <table>
        <caption>선택한 결제 방법</caption>
      <tr id="creditCardFields" style="display: none;">
        <td class="table-left">카드사</td>
        <td class="table-right">
            <select id="credit_card_company" name="credit_card_company" required>
                <option value="credit_card_company">롯데 카드</option>
                <option value="credit_card_company">비씨 카드</option>
                <option value="credit_card_company">삼성 카드</option>
                <option value="credit_card_company">신한 카드</option>
                <option value="credit_card_company">우리 카드</option>
                <option value="credit_card_company">케이비국민 카드</option>
                <option value="credit_card_company">하나 카드</option>
                <option value="credit_card_company">현대 카드</option>
            </select>
        </td>
    </tr>
    <tr id="creditCardNumberFields" style="display: none;">
        <td class="table-left">카드 번호</td>
        <td class="table-right">
          <input type="text" id="credit_card_number" name="credit_card_number" />
        </td>
      </tr>
      <tr id="expirationDateFields" style="display: none;">
        <td class="table-left">유효 기간</td>
        <td class="table-right">
          <input type="text" id="expiration_date" name="expiration_date" />
        </td>
      </tr>
      <tr id="cvcFields" style="display: none;">
        <td class="table-left">CVC</td>
        <td class="table-right">
          <input type="text" id="cvc" name="cvc" />
        </td>
      </tr>
      <tr id="bankTransferFields" style="display: none;">
        <td class="table-left">입금 계좌</td>
        <td class="table-right">
          코사은행 1111-11-111111
        </td>
      </tr>
      </thead>
      </table>
    </tbody>
</table>
      <hr class="last-hr">
      <h2>위와 같이 구매하시겠습니까?</h2>
      <div class="button">
          <button class="purchase-button" type="button"
          >
          <a href="/Frontend/HTML/purchase/purchase-complete.html">
          구매하기
        </a>
        </button>
    <br />
    <button class="goback-button" onclick="goBack()">돌아가기</button>
</div>
</form>
    <script>
        function showSelectedPaymentFields() {
            const selectedPaymentMethod = document.getElementById("payment_method").value;
            const creditCardFields = document.getElementById("creditCardFields");
            const creditCardNumberFields = document.getElementById("creditCardNumberFields");
            const expirationDateFields = document.getElementById("expirationDateFields");
            const cvcFields = document.getElementById("cvcFields");
            const bankTransferFields = document.getElementById("bankTransferFields");
            const selectedPaymentFields = document.getElementById("selectedPaymentFields");

  creditCardFields.style.display = "none";
  creditCardNumberFields.style.display = "none";
  expirationDateFields.style.display = "none";
  cvcFields.style.display = "none";
  bankTransferFields.style.display = "none";

  if (selectedPaymentMethod === "credit_card") {
    creditCardFields.style.display = "table-row";
    creditCardNumberFields.style.display = "table-row";
    expirationDateFields.style.display = "table-row";
    cvcFields.style.display = "table-row";
  } else if (selectedPaymentMethod === "bank_transfer") {
    bankTransferFields.style.display = "table-row";
  }

  selectedPaymentFields.style.display = "block";
  selectedPaymentFields.innerHTML = `선택한 결제 방법: ${selectedPaymentMethod}`;
}
function goBack() {
  window.history.back();
}

document
  .getElementById("purchaseForm")
  .addEventListener("submit", function (event) {
    event.preventDefault();
    confirmPayment();
  });

function confirmPayment() {
  const selectedPaymentMethod = document.getElementById("payment_method").value;
  const resultDiv = document.getElementById("paymentResult");

  if (selectedPaymentMethod === "credit_card") {
    const creditCardNumber =
      document.getElementById("credit_card_number").value;
    const expirationDate = document.getElementById("expiration_date").value;
    const paymentResult = performCreditCardPayment(
      creditCardNumber,
      expirationDate
    );
    resultDiv.innerHTML = `결제 결과: ${paymentResult}`;
  } else if (selectedPaymentMethod === "bank_transfer") {
    const bankAccountInfo = "코사은행 1111-11-111111";
    resultDiv.innerHTML = `입금 정보: ${bankAccountInfo}`;
  }
}
document.addEventListener("DOMContentLoaded", function () {
  showSelectedPaymentFields();
});
    </script>
  </body>
</html>
